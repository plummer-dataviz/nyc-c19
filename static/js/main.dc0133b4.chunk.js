(this["webpackJsonpdatavid-19"]=this["webpackJsonpdatavid-19"]||[]).push([[0],{102:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(40),o=n.n(c),i=(n(98),n(39),n(6)),u=n.n(i),l=n(20),s=n(12),f=n(13),p=n(1),d=n(3),m=20,h=20,v=40,b=40;function y(t){switch(t){case"Kings":return"Brooklyn";case"New York":return"Manhattan";case"Richmond":return"Staten Island";default:return t}}function g(t){var e=t.filter((function(t){return["Kings","New York","Bronx","Queens","Richmond"].includes(t["County Name"].replace(" County",""))})).filter((function(t){return"NY"===t.State}));return e=e.reduce((function(t,e){var n=Object.entries(e);n.splice(0,4);var a=n.map((function(t){return new Date(t[0])<new Date("2020-03-07")?null:{date:new Date(t[0]),cases:t[1],borough:y(e["County Name"].replace(" County",""))}}));return t=[].concat(Object(f.a)(t),Object(f.a)(a))}),[]),Object(d.compact)(e)}function j(t,e,n){var a,r=p.k().key((function(t){return t.date})).entries(e),c=p.m().domain(p.f(e,(function(t){return t.date}))).range([v,1080-b]),o=p.l().domain([0,p.j(r,(function(t){return Object(d.sumBy)(t.values,"cases")}))]).nice().range([550-h,m]),i=p.c(c);t.children.length?a=p.n(t.children[0]):((a=p.n(t).append("svg").attr("width",1080).attr("height",550)).append("g").attr("class","axis x-axis").attr("transform","translate(0,".concat(550-h,")")).call(i).append("text").attr("class","axis-label").attr("x","50%").attr("dy","3em"),a.append("g").attr("class","axis y-axis").attr("transform","translate(".concat(1080-b,", 0)")).call(p.d(o)).append("text").attr("class","axis-label").attr("y","50%").attr("dx","-3em").attr("writing-mode","vertical-rl")),function(t,e,n,a,r){Object(f.a)(new Set(e.map((function(t){return t.borough}))));var c=p.k().key((function(t){return t.date})).entries(e),o=function(t){return r?r===t?"rgb(255, 213, 210)":"#e8e8e8":"rgb(255, 213, 210)"};t.selectAll("path.area").data([c]).join((function(t){return t.append("path").attr("fill-opacity",0)}),(function(t){return t}),(function(t){return t.remove()})).call((function(t){t.transition().duration(1e3).attr("fill-opacity",1).attr("fill",(function(t){var e=t.key;return o(e)})).attr("stroke","none").attr("class",(function(t){return"area ".concat(r," active")})).attr("d",p.a().x((function(t){return n(new Date(t.key))})).y0((function(t){return a(0)})).y1((function(t){var e,n=null===(e=Object(d.find)(t.values,{borough:r}))||void 0===e?void 0:e.cases;return r||(n=Object(d.sumBy)(t.values,"cases")),a(n)})))})).append("title").text((function(t){return t.key})),t.selectAll("path.totalArea").data([c]).join((function(t){return t.append("path").attr("fill-opacity",0)}),(function(t){return t}),(function(t){return t.remove()})).call((function(t){t.attr("fill-opacity",.3).attr("fill",(function(t){return o(t)})).attr("stroke","none").attr("class",(function(t){return"area total"})).attr("d",p.a().x((function(t){return n(new Date(t.key))})).y0((function(t){return a(0)})).y1((function(t){var e=Object(d.sumBy)(t.values,"cases");return a(e)})))})).append("title").text((function(t){return t.key}))}(a,e,c,o,n)}var w=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],c=e[1],o=Object(a.useState)(null),i=Object(s.a)(o,2),f=i[0],d=i[1],m=Object(a.useState)(null),h=Object(s.a)(m,2),v=h[0],b=h[1],y=Object(a.useCallback)((function(t){null!==t&&null!==f&&null!=n&&function(t,e,n,a,r){var c,o=p.g().parallels([33,45]).rotate([96,-39]).fitSize([1080/1.1,550/1.1],e),i=p.h().projection(o);(c=t.children.length?p.n(t.children[0]):p.n(t).append("svg").attr("width",1080).attr("height",550)).selectAll(".borough").data(e.features).join("path").attr("d",i).attr("class","borough").attr("fill",(function(t){return r?r===t.properties.name?"rgb(255, 213, 210)":"#e8e8e8":"rgb(255, 213, 210)"})).on("mouseover",(function(t){a(t.properties.name)})).append("title").text((function(t){return t.properties.name})),c.append("g").selectAll(".label").data(e.features).enter().append("text").attr("class","halo").attr("transform",(function(t){return"translate("+i.centroid(t)+")"})).style("text-anchor","middle").text((function(t){return t.properties.name}))}(t,f,0,b,v)}),[f,n,v]),w=Object(a.useCallback)((function(t){null!==t&&null!=n&&j(t,n,v)}),[n,v]);return Object(a.useEffect)((function(){null===n&&function(){var t=Object(l.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.e("./covid_confirmed_usafacts.csv",p.b);case 2:e=t.sent,n=g(e),c(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n]),Object(a.useEffect)((function(){function t(){return(t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.i("./new-york-city-boroughs.geojson.json");case 2:e=t.sent,d(e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===f&&function(){t.apply(this,arguments)}()}),[f]),r.a.createElement("div",{className:"ChartsContainer"},r.a.createElement("header",{className:"App-header"},"Confirmed Cases of Covid-19 by NYC Borough"),r.a.createElement("div",{className:"MapsContainer",ref:y}),r.a.createElement("div",{className:"AreaContainer",ref:w}))};var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},39:function(t,e,n){},93:function(t,e,n){t.exports=n(102)},98:function(t,e,n){}},[[93,1,2]]]);
//# sourceMappingURL=main.dc0133b4.chunk.js.map